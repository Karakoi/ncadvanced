<div class="container" *ngIf="users">
  <form-template>
    <div class="template-header">
      Users
      <button class="btn btn-primary btn-xs pull-right" (click)="openAddUserModal()">New user
      </button>

      <!--<div class="form-group" style="width: 300px">-->

        <!--<div class="input-group">-->
          <!--Users <label class="input-group-addon"><i class="fa fa-search"></i></label>-->
          <!--<input type="text" class="form-control" placeholder="Search da Fish" [(ngModel)]="users">-->
        <!--</div>-->
        <!--<button class="btn btn-primary btn-xs pull-right" (click)="openAddUserModal()">New user-->
        <!--</button>-->
      <!--</div>-->

    </div>
    <div class="template-body">
      <table class="table table-bordered table-hover table-condensed">
        <thead>
        <tr>
          <th (click)="changeOrderParams(!orderType, 'firstName')">First name
            <span *ngIf="orderType && orderField == 'firstName'" class="glyphicon glyphicon-triangle-bottom pull-right" aria-hidden="true"></span>
            <span *ngIf="!orderType && orderField == 'firstName'" class="glyphicon glyphicon-triangle-top pull-right" aria-hidden="true"></span>
          </th>
          <th (click)="changeOrderParams(!orderType, 'lastName')">Last name
            <span *ngIf="orderType && orderField == 'lastName'" class="glyphicon glyphicon-triangle-bottom pull-right" aria-hidden="true"></span>
            <span *ngIf="!orderType && orderField == 'lastName'" class="glyphicon glyphicon-triangle-top pull-right" aria-hidden="true"></span>
          </th>
          <th (click)="changeOrderParams(!orderType, 'email')">Email
            <span *ngIf="orderType && orderField == 'email'" class="glyphicon glyphicon-triangle-bottom pull-right" aria-hidden="true"></span>
            <span *ngIf="!orderType && orderField == 'email'" class="glyphicon glyphicon-triangle-top pull-right" aria-hidden="true"></span>
          </th>
          <th (click)="changeOrderParams(!orderType, 'role')">Role
            <span *ngIf="orderType && orderField == 'role'" class="glyphicon glyphicon-triangle-bottom pull-right" aria-hidden="true"></span>
            <span *ngIf="!orderType && orderField == 'role'" class="glyphicon glyphicon-triangle-top pull-right" aria-hidden="true"></span>
          </th>
          <th>Details</th>
          <th>Delete</th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td>
            <input type="text" [(ngModel)]="searchTypes.firstName" class="form-control"/>
          </td>
          <td>
            <input type="text" [(ngModel)]="searchTypes.lastName" class="form-control"/>
          </td>
          <td>
            <input type="text" [(ngModel)]="searchTypes.email" class="form-control"/>
          </td>
          <td>
            <select class="form-control" [(ngModel)]="searchTypes.role">
              <option></option>
              <option>admin</option>
              <option>employee</option>
              <option>office manager</option>
            </select>
          </td>
          <td class="td-center"><span class="glyphicon glyphicon-info-sign"></span></td>
          <td class="td-center"><span class="glyphicon glyphicon-trash"></span></td>
        </tr>
        <tr *ngFor="let user of sorted | filter: searchTypes | sort: {field: orderField, order: orderType}">
          <td>{{user.firstName}}</td>
          <td>{{user.lastName}}</td>
          <td>{{user.email}}</td>
          <td>{{user.role.name}}</td>
          <td class="text-center delete-col">
            <button [routerLink]="['/user', user.id]" class="glyphicon glyphicon-info-sign btn btn-primary btn-xs center-block"></button>
          </td>
          <td class="text-center delete-col">
            <button [attr.value]="user.id" class="glyphicon glyphicon-trash btn btn-danger btn-xs center-block"
                    (click)="openDeleteUserModal(user)"></button>
          </td>
        </tr>
        </tbody>
      </table>
      <select class="form-control pull-left" style="width: 90px;">
        <option>10</option>
        <option selected>20</option>
        <option>50</option>
        <option>100</option>
      </select>
      <ul class="pagination pull-right">
        <li class="paginate_button active" (click)="load($event)"><a>1</a></li>
        <li class="paginate_button" (click)="load($event)" *ngFor="let item of createRange(pageNumber)">
          <a>{{item}}</a></li>
      </ul>
    </div>
  </form-template>
</div>
<add-user [users]="users" (updated)="updateUsers($event)"></add-user>
<delete-user [users]="users" (updated)="updateUsers($event)"></delete-user>
