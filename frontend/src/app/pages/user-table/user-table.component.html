<div class="container" *ngIf="users">
  <div class="col-lg-12">
    <div class="row">
      <div class="overflow: auto panel panel-default">
        <div class="panel-heading">
          <h2 class="panel-title">Users</h2>
        </div>
        <div class="panel-body">
          <table class="table table-bordered table-hover table-condensed">
            <thead>
            <tr>
              <th>First name</th>
              <th>Last Name</th>
              <th>Second Name</th>
              <th>Phone number</th>
              <th>Email</th>
              <th>Date of birth</th>
              <th>Role</th>
              <th>Delete</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let user of users">
              <td>{{user.firstName}}</td>
              <td>{{user.lastName}}</td>
              <td>{{user.secondName}}</td>
              <td>{{user.phoneNumber}}</td>
              <td>{{user.email}}</td>
              <td>{{user.dateOfBirth}}</td>
              <td>{{user.role.name}}</td>
              <td class="text-center">
                <button [attr.value]="user.id" class="glyphicon glyphicon-trash" (click)="showDeleteUserModal(user)"></button>
              </td>
            </tr>
            </tbody>
          </table>
          <input type="submit" class="btn btn-primary pull-left" (click)="showAddUserModal()" value="New User"/>
          <ul class="pagination pull-right">
            <li class="paginate_button active" (click)="load($event)"><a>1</a></li>
            <li class="paginate_button" (click)="load($event)" *ngFor="let item of createRange(pageNumber)">
              <a>{{item}}</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<add-user>
  <div class="app-modal-header">
    <div class="panel-title">
      <b>Create new user</b>
    </div>
  </div>
  <div class="app-modal-body">
    <form [formGroup]="addUserForm" (ngSubmit)="addUser(addUserForm.value)" novalidate>

      <div class="form-group col-lg-6 col-sm-6" [ngClass]="{'has-error': !validateField('firstName')}">
        <div class="input-group">
          <label for="firstName">First name:</label>
          <input id="firstName" formControlName="firstName" type="text" placeholder="First Name"
                 class="form-control"/>
          <span *ngIf="!validateField('firstName')" class="glyphicon glyphicon-remove form-control-feedback"></span>
        </div>
        <div *ngIf="!validateField('firstName')" class="help-block text-left">
          <span *ngIf="addUserForm.get('firstName').hasError('required')">First name required.</span>
        </div>
      </div>

      <div class="form-group  col-lg-6 col-sm-6" [ngClass]="{'has-error': !validateField('lastName')}">
        <div class="input-group">
          <label for="lastName">Last name:</label>
          <input id="lastName" formControlName="lastName" type="text" placeholder="Last Name" class="form-control"/>
          <span *ngIf="!validateField('lastName')" class="glyphicon glyphicon-remove form-control-feedback"></span>
        </div>
        <div *ngIf="!validateField('lastName')" class="help-block text-left">
          <span *ngIf="addUserForm.get('lastName').hasError('required')">Last name required.</span>
        </div>
      </div>

      <div class="form-group col-lg-6 col-sm-6" [ngClass]="{'has-error': !validateField('secondName')}">
        <div class="input-group">
          <label for="secondName">Second Name:</label>
          <input id="secondName" formControlName="secondName" type="text" placeholder="Second Name"
                 class="form-control"/>
          <span *ngIf="!validateField('secondName')" class="glyphicon glyphicon-remove form-control-feedback"></span>
        </div>
      </div>

      <div class="form-group col-lg-6 col-sm-6">
        <label for="role">Role:</label>
        <select id="role" formControlName="role" class="form-control">
          <option [ngValue]="role" *ngFor="let role of roles">{{role.name}}</option>
        </select>
      </div>

      <div class="form-group col-lg-6 col-sm-6" [ngClass]="{'has-error': !validateField('email')}">
        <div class="input-group">
          <label for="email">Email:</label>
          <input type="email" id="email" formControlName="email" class="form-control" placeholder="Email">
          <span *ngIf="!validateField('email')" class="glyphicon glyphicon-remove form-control-feedback"></span>
        </div>
        <div *ngIf="!validateField('email')" class="help-block text-left">
          <span *ngIf="addUserForm.get('email').hasError('required')">Email address required.</span>
          <span *ngIf="addUserForm.get('email').hasError('email')">Invalid email address.</span>
        </div>
      </div>

      <div class="form-group col-lg-6 col-sm-6" [ngClass]="{'has-error': !validateField('dateOfBirth')}">
        <div class="input-group">
          <label for="dateOfBirth">Date of Birth:</label>
          <input id="dateOfBirth" formControlName="dateOfBirth" type="date" placeholder="Date of birth"
                 class="form-control"/>
          <span *ngIf="!validateField('dateOfBirth')" class="glyphicon glyphicon-remove form-control-feedback"></span>
        </div>
        <div *ngIf="!validateField('dateOfBirth')" class="help-block text-left">
          <span *ngIf="addUserForm.get('dateOfBirth').hasError('dateISO')">Invalid date.</span>
        </div>
      </div>

      <div class="form-group col-lg-6 col-sm-6" [ngClass]="{'has-error': !validateField('password')}">
        <div class="input-group">
          <label for="password">Password:</label>
          <input type="password" id="password" formControlName="password" class="form-control"
                 placeholder="Password">
          <span *ngIf="!validateField('password')" class="glyphicon glyphicon-remove form-control-feedback"></span>
        </div>
        <div *ngIf="!validateField('password')" class="help-block text-left">
          <span *ngIf="addUserForm.get('password').hasError('required')">Password required.</span>
          <span *ngIf="addUserForm.get('password').hasError('minlength')">Password invalid. Password must be at least six characters long.</span>
        </div>
      </div>

      <div class="form-group col-lg-6 col-sm-6" [ngClass]="{'has-error': !validateField('confirmPassword')}">
        <div class="input-group">
          <label for="confirmPassword">Confirm password:</label>
          <input type="password" id="confirmPassword" formControlName="confirmPassword" class="form-control"
                 placeholder="confirmPassword">
          <span *ngIf="!validateField('confirmPassword')" class="glyphicon glyphicon-remove form-control-feedback"></span>
        </div>
        <div *ngIf="!validateField('confirmPassword')" class="help-block text-left">
          <span *ngIf="addUserForm.get('confirmPassword').hasError('required')">Password required.</span>
          <span *ngIf="addUserForm.get('confirmPassword').hasError('minlength')">Password invalid. Password must be at least six characters long.</span>
          <!--<span *ngIf="addUserForm.get('confirmPassword').hasError('not match')">Passwords is not match.</span>-->
        </div>
      </div>

      <div class="app-modal-footer">
        <div class="form-group col-lg-12 col-sm-12">
          <button type="submit" class="btn btn-primary col-lg-5 col-sm-5" [disabled]="addUserForm.invalid">Submit
          </button>
          <button type="submit" class="btn btn-danger col-lg-offset-2 col-sm-offset-2 col-lg-5 col-sm-5"
                  (click)="addUserModal.hide()">Close
          </button>
        </div>
      </div>
    </form>
  </div>
</add-user>

<delete-user>

  <div class="app-modal-header">
    <div class="panel-title" style="text-align: center; font-size: 20px;">
      <b>Do you want to delete this user?</b>
    </div>
  </div>

  <div class="app-modal-body" *ngIf="currentSelectedUser">
    <div class="form-group col-lg-12 col-sm-12">
      Full name: <label style="font-size: 18px;">{{currentSelectedUser.secondName}}
      {{currentSelectedUser.firstName}} </label>
    </div>

    <div class="form-group col-lg-12 col-sm-12">
      Role: <label style="font-size: 18px;">{{currentSelectedUser.role.name}}</label>
    </div>
  </div>

  <div class="app-modal-footer">
    <div class="form-group col-lg-12 col-sm-12">
      <button type="submit" class="btn btn-success col-lg-0 col-sm-5" (click)="deleteUser($event)">Delete</button>
      <button type="button" class="btn btn-danger  col-lg-5 col-sm-12"
              (click)="deleteUserModal.hideDialog()">Cancel
      </button>
    </div>
  </div>
  <delete-user>
