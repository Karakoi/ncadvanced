<div class="container" *ngIf="requests">
  <form-template>
    <div class="template-header">
      Requests
      <button class="btn btn-primary btn-xs pull-right" (click)="openFormModal()">New request
      </button>
    </div>
    <div class="template-body">
      <table class="table table-bordered table-hover">
        <thead>
        <tr>
          <th>Title</th>
          <th>Date of creation</th>
          <th>Priority Status</th>
          <th>Progress Status</th>
          <th>Reporter</th>
          <th>Assignee</th>
          <th>Delete</th>
        </tr>
        </thead>
        <tbody>
        <tr style="cursor: pointer;" *ngFor="let request of sorted" >
          <td [routerLink]="['/request', request.id]"><a>{{request.title}}</a></td>
          <td><date-parse [date]="request.dateOfCreation"></date-parse></td>
          <td>{{request.priorityStatus.name}}</td>
          <td>{{request.progressStatus.name}}</td>
          <td>{{request.reporter.firstName}}</td>
          <td>{{request.assignee.firstName}}</td>
          <td class="text-center delete-col">
            <button [attr.value]="request.id" class="glyphicon glyphicon-trash"
                    (click)="openDeleteRequestModal(request)"></button>
          </td>
        </tr>
        </tbody>
      </table>
      <ul class="pagination pull-right">
        <li class="paginate_button active" (click)="load($event)"><a>1</a></li>
        <li class="paginate_button" (click)="load($event)" *ngFor="let item of createRange(pageCount)"><a>{{item}}</a>
        </li>
      </ul>
    </div>
  </form-template>
  <request-form [requests]="requests" (updated)="updateRequests($event)"></request-form>
  <delete-request [requests]="requests" (updated)="updateRequests($event)"></delete-request>
</div>

