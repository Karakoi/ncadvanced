<div class="container" *ngIf="requests">
  <div class="row" *ngIf="!requests.length">
    <div class="header-content">
      <div class="header-content-inner text-center">
        <h1 id="homeHeading">No requests on the record</h1>
        <hr>
        <p>Start off by creating new request</p>
        <a class="btn btn-primary btn-xl">Create request</a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-12">
      <div class="panel with-nav-tabs panel-default">
        <div class="panel-heading">
          <ul class="nav nav-tabs">
            <li class="active">
              <a href="#freeRequests" data-toggle="tab">
                <h2 class="panel-title">Free Requests</h2>
              </a>
            </li>
            <li>
              <a href="#myRequests" data-toggle="tab" (click)="fetchMyRequests(1)">
                <h2 class="panel-title">My Requests</h2>
              </a>
            </li>
          </ul>
        </div>
        <div class="panel-body">
          <div class="tab-content">
            <div class="tab-pane fade in active" id="freeRequests" *ngIf="requests.length">
              <table class="table table-bordered table-hover table-striped">
                <thead>
                <tr>
                  <th width="30px"></th>
                  <th>Title</th>
                  <th>Creation Date</th>
                  <th>Priority</th>
                  <th>Reporter</th>
                  <th>Assign</th>
                </tr>
                </thead>
                <tbody id="free-list">
                <tr *ngFor="let req of requests">
                  <td>
                    <input type="checkbox" (click)="toggle(req.id)" [checked]="isChecked(req.id)">
                  </td>
                  <td><a [routerLink]="['/request', req.id]">{{ req.title }}</a></td>
                  <td>
                    <date-parse [date]="req.dateOfCreation"></date-parse>
                  </td>
                  <td>{{ req.priorityStatus.name }}</td>
                  <td><a [routerLink]="['/user', req.reporter.id]">{{ req.reporter.firstName }} {{ req.reporter.lastName}}</a></td>
                  <td class="assign">
                    <button class="center-block" (click)="assign(req)"><i class="fa fa-plus-circle" aria-hidden="true"></i></button>
                  </td>
                </tr>
                </tbody>
              </table>
              <input *ngIf="canUnite()" type="submit" class="btn btn-primary" (click)="join()" value="Unite">
              <input *ngIf="canUnite()" type="submit" class="btn btn-success" (click)="uncheckAll()"
                     value="Uncheck All">
              <ul class="pagination pull-right">
                <li class="paginate_button active" (click)="load($event)"><a>1</a></li>
                <li class="paginate_button" (click)="load($event)" *ngFor="let item of createRange(pageCount)">
                  <a>{{item}}</a></li>
              </ul>
            </div>
            <div class="tab-pane fade" id="myRequests">
              <div class="text-center" *ngIf="!myRequests.length">
                <h2>No requests assigned yet</h2>
              </div>
              <div *ngIf="myRequests.length">
                <table class="table table-bordered table-hover table-striped">
                  <thead>
                  <tr>
                    <th>Title</th>
                    <th>Creation Date</th>
                    <th>Priority</th>
                    <th>Progress</th>
                    <th>Reporter</th>
                  </tr>
                  </thead>
                  <tbody id="my-list">
                  <tr *ngFor="let req of myRequests">
                    <td><a [routerLink]="['/request', req.id]">{{ req.title }}</a></td>
                    <td>
                      <date-parse [date]="req.dateOfCreation"></date-parse>
                    </td>
                    <td>{{ req.priorityStatus.name }}</td>
                    <td>{{ req.progressStatus.name }}</td>
                    <td><a [routerLink]="['/user', req.reporter.id]">{{ req.reporter.firstName }} {{ req.reporter.lastName}}</a></td>
                  </tr>
                  </tbody>
                </table>
                <ul class="pagination pull-right">
                  <li class="paginate_button active" (click)="load($event)"><a>1</a></li>
                  <li class="paginate_button" (click)="loadMyRequests($event)" *ngFor="let item of createRange(myPageCount)">
                    <a>{{item}}</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<assign-request [requests]="requests" (updated)="updateRequests($event)"></assign-request>
<join-request [requests]="requests" [checked]="checked" (updated)="updateRequests($event)"></join-request>
